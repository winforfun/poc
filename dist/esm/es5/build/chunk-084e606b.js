import{h}from"../winfun.core.js";function o(e,n){for(var t,r,o=null,i=!1,u=!1,a=arguments.length;a-- >2;)T.push(arguments[a]);for(;T.length>0;){var c=T.pop();if(c&&void 0!==c.pop)for(a=c.length;a--;)T.push(c[a]);else"boolean"==typeof c&&(c=null),(u="function"!=typeof e)&&(null==c?c="":"number"==typeof c?c=String(c):"string"!=typeof c&&(u=!1)),u&&i?o[o.length-1].vtext+=c:null===o?o=[u?{vtext:c}:c]:o.push(u?{vtext:c}:c),i=u}if(null!=n){if(n.className&&(n.class=n.className),"object"==typeof n.class){for(a in n.class)n.class[a]&&T.push(a);n.class=T.join(" "),T.length=0}null!=n.key&&(t=n.key),null!=n.name&&(r=n.name)}return"function"==typeof e?e(n,o||[],P):{vtag:e,vchildren:o,vtext:void 0,vattrs:n,vkey:t,vname:r,f:void 0,c:!1}}function u(e){return{vtag:e.vtag,vchildren:e.vchildren,vtext:e.vtext,vattrs:e.vattrs,vkey:e.vkey,vname:e.vname}}Object.setPrototypeOf||Array;var T=[],P={forEach:function(e,n){e.forEach(function(e,t,r){return n(u(e),t,r)})},map:function(e,n){return e.map(function(e,t,r){return function(e){return{vtag:e.vtag,vchildren:e.vchildren,vtext:e.vtext,vattrs:e.vattrs,vkey:e.vkey,vname:e.vname}}(n(u(e),t,r))})}},__rest=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)n.indexOf(r[o])<0&&(t[r[o]]=e[r[o]])}return t};function defaultConsumerRender(e,n){return o("context-consumer",{subscribe:e,renderer:n})}function createProviderConsumer(e,n){void 0===n&&(n=defaultConsumerRender);var t=new Map,r=e;function i(e,n){Array.isArray(e)?e.slice().forEach(function(e){n[e]=r[e]}):n[e]=Object.assign({},r),n.forceUpdate()}function u(e){return function(n){t.has(n)||(t.set(n,e),i(e,n))}}function a(e,n){return u(n)(e),function(){t.delete(e)}}return{Provider:function(e,n){return r=e.state,t.forEach(i),n},Consumer:function(e,t){return n(a,t[0])},wrapConsumer:function(e,n){var t=e.is;return function(e){var r=e.children,i=__rest(e,["children"]);return o(t,Object.assign({ref:u(n)},i),r)}},injectProps:function(e,n){var t=null,r=Object.keys(e.properties).find(function(n){return 1==e.properties[n].elementRef});if(null==r)throw new Error("Please ensure that your Component "+e.is+' has an attribtue with "@Element" decorator. This is required to be able to inject properties.');var o=e.prototype.componentWillLoad;e.prototype.componentWillLoad=function(){if(t=a(this[r],n),o)return o.bind(this)()};var i=e.prototype.componentDidUnload;e.prototype.componentDidUnload=function(){if(t(),i)return i.bind(this)()}}}}var Tunnel=createProviderConsumer(null,function(e,n){return h("context-consumer",{subscribe:e,renderer:n})});export{Tunnel as a};