import*as tslib_1 from"../polyfills/tslib.js";import{h}from"../winfun.core.js";import{a as Tunnel}from"./chunk-084e606b.js";function createCommonjsModule(t,e){return t(e={exports:{}},e.exports),e.exports}var xmlToJSON_1=createCommonjsModule(function(t){var e=function(){this.version="1.3.5";var t={mergeCDATA:!0,grokAttr:!0,grokText:!0,normalize:!0,xmlns:!0,namespaceKey:"_ns",textKey:"_text",valueKey:"_value",attrKey:"_attr",cdataKey:"_cdata",attrsAsObject:!0,stripAttrPrefix:!0,stripElemPrefix:!0,childrenAsArray:!0},r=new RegExp(/(?!xmlns)^.*:/),a=new RegExp(/^\s+|\s+$/g);return this.grokType=function(t){return/^\s*$/.test(t)?null:/^(?:true|false)$/i.test(t)?"true"===t.toLowerCase():isFinite(t)?parseFloat(t):t},this.parseString=function(t,e){return this.parseXML(this.stringToXML(t),e)},this.parseXML=function(n,s){for(var i in s)t[i]=s[i];var o={},u=0,c="";if(t.xmlns&&n.namespaceURI&&(o[t.namespaceKey]=n.namespaceURI),n.attributes&&n.attributes.length>0){for(var l={};u<n.attributes.length;u++){var p=n.attributes.item(u);h={};var d;d=t.stripAttrPrefix?p.name.replace(r,""):p.name,h[t.valueKey]=t.grokAttr?this.grokType(p.value.replace(a,"")):p.value.replace(a,""),t.xmlns&&p.namespaceURI&&(h[t.namespaceKey]=p.namespaceURI),t.attrsAsObject?l[d]=h:o[t.attrKey+d]=h}t.attrsAsObject&&(o[t.attrKey]=l)}if(n.hasChildNodes())for(var f,m,h,y=0;y<n.childNodes.length;y++)4===(f=n.childNodes.item(y)).nodeType?t.mergeCDATA?c+=f.nodeValue:o.hasOwnProperty(t.cdataKey)?(o[t.cdataKey].constructor!==Array&&(o[t.cdataKey]=[o[t.cdataKey]]),o[t.cdataKey].push(f.nodeValue)):t.childrenAsArray?(o[t.cdataKey]=[],o[t.cdataKey].push(f.nodeValue)):o[t.cdataKey]=f.nodeValue:3===f.nodeType?c+=f.nodeValue:1===f.nodeType&&(0===u&&(o={}),m=t.stripElemPrefix?f.nodeName.replace(r,""):f.nodeName,h=e.parseXML(f),o.hasOwnProperty(m)?(o[m].constructor!==Array&&(o[m]=[o[m]]),o[m].push(h)):(t.childrenAsArray?(o[m]=[],o[m].push(h)):o[m]=h,u++));else c||(t.childrenAsArray?(o[t.textKey]=[],o[t.textKey].push(null)):o[t.textKey]=null);if(c)if(t.grokText){var g=this.grokType(c.replace(a,""));null!=g&&(o[t.textKey]=g)}else o[t.textKey]=t.normalize?c.replace(a,"").replace(/\s+/g," "):c.replace(a,"");return o},this.xmlToString=function(t){try{return t.xml?t.xml:(new XMLSerializer).serializeToString(t)}catch(t){return null}},this.stringToXML=function(t){try{var e=null;return window.DOMParser?e=(new DOMParser).parseFromString(t,"text/xml"):((e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t),e)}catch(t){return null}},this}.call({});null!==t&&t.exports&&(t.exports=e)});function getAttrs(t){var e=t._attr;return Object.keys(e).reduce(function(t,r){return t[r]=e[r]._value,t},{})}function load(t){return tslib_1.__awaiter(this,void 0,void 0,function(){var e,r,a;return tslib_1.__generator(this,function(n){switch(n.label){case 0:return[4,fetch(t)];case 1:return e=n.sent(),a=(r=xmlToJSON_1).parseString,[4,e.text()];case 2:return[2,a.apply(r,[n.sent()]).PackData.map(function(t){return Object.assign({},getAttrs(t),{players:t.PlayerData.map(function(t){return Object.assign({},getAttrs(t),{data:t.P.map(getAttrs),get:function(t){return this.data.find(function(e){return e.id===t})}})})[0],clubs:t.ClubData.map(function(t){return Object.assign({},getAttrs(t),{data:t.C.map(getAttrs),get:function(t){return this.data.find(function(e){return e.id===t})}})})[0],stadiums:t.StadiumData.map(function(t){return Object.assign({},getAttrs(t),{data:t.S.map(getAttrs),get:function(t){return this.data.find(function(e){return e.id===t})}})})[0]})})[0]]}})})}var WFData=function(){function t(){this.src="http://c3420952.r52.cf0.rackcdn.com/toprateddata.xml"}return t.prototype.componentWillLoad=function(){return tslib_1.__awaiter(this,void 0,void 0,function(){var t;return tslib_1.__generator(this,function(e){switch(e.label){case 0:return t=this,[4,load(this.src)];case 1:return t.data=e.sent(),[2]}})})},t.prototype.render=function(){return h(Tunnel.Provider,{state:this.data},h("slot",null))},Object.defineProperty(t,"is",{get:function(){return"winfun-data"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{data:{state:!0},src:{type:String,attr:"src"}}},enumerable:!0,configurable:!0}),t}();export{WFData as WinfunData};